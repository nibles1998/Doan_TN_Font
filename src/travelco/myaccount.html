<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from shmai.com/preview/travelco/myaccount.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 26 Sep 2018 04:20:37 GMT -->

<head>
    <!-- META -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="TravelCo - Travel Agency Bootstrap Template">
    <meta name="keywords" content="new, html, bootstrap, new html template, design, creative, clean, modern">
    <meta name="author" content="Nauman Anwar">
    <!--PAGE FAVICON-->
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.ico/favicon-32x32.png">
    <!-- PAGE TITLE -->
    <title>TravelCo </title>
    <!-- BOOTSTRAP CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <!-- ALL GOOGLE FONTS -->
    <link href="https://fonts.googleapis.com/css?family=Rubik:300,500,900" rel="stylesheet">
    <!-- FONT AWESOME CSS -->
    <link rel="stylesheet" href="assets/fonts/line-awesome-font-awesome.min.css">
    <!-- OWL CAROSEL CSS -->
    <link rel="stylesheet" href="assets/owlcarousel/css/owl.carousel.css">
    <link rel="stylesheet" href="assets/owlcarousel/css/owl.theme.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <!-- MAGNIFIC CSS -->
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <!-- ANIMATE CSS -->
    <link rel="stylesheet" href="assets/css/animate.min.css">
    <!-- MAIN STYLE CSS -->
    <link rel="stylesheet" href="assets/css/venobox.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="assets/css/style.css">
    <!-- RESPONSIVE CSS -->
    <link rel="stylesheet" href="assets/css/responsive.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
    <!-- START PRELOADER AREA-->
    <div class="preloader-area">
        <div class="spinner">
            <i class="fa fa-plane" aria-hidden="true"></i>
            <h2>TravelCo</h2>
        </div>
    </div>
    <!-- END PRELOADER AREA -->
    <!-- START HOMEPAGE DESIGN AREA -->
    <header id="home" class="welcome-area">
        <div class="header-top-area inner-page-htop">
            <div class="container">
                <div class="row">
                    <div class="col-md-3">
                        <!-- START LOGO DESIGN AREA -->
                        <div class="logo">
                            <a href="index.html">
                                <img class="innper-page-logo" src="assets/images/logo.png" alt="">
                            </a>
                        </div>
                        <!-- END LOGO DESIGN AREA -->
                    </div>
                    <div class="col-md-9 no-padding">
                        <!-- START MENU DESIGN AREA -->
                        <div class="mainmenu">
                            <div class="navbar navbar-nobg">
                                <div class="navbar-header">
                                    <button type="button" class="navbar-toggle" data-toggle="collapse"
                                        data-target=".navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                    </button>
                                </div>
                                <div class="navbar-collapse collapse no-padding">
                                    <ul class="nav navbar-nav navbar-left">
                                        <li><a href="index.html">Home</a></li>
                                        <li class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle"
                                                href="#">Tour<span class="caret"></span></a>
                                            <ul class="dropdown-menu">
                                                <li><a href="tours.html">List</a></li>
                                                <li><a href="activities.html">Activites</a></li>
                                            </ul>
                                        </li>
                                        <li><a class="smoth-scroll" href="about.html">About</a></li>
                                        <li><a href="contact.html">Contact</a></li>
                                    </ul>
                                    <div class="pull-right" style="margin-top: 2em;" id="login">
                                        <div style="display: flex;">
                                            <a style="margin: 0 10px;" href="myaccount.html">Profile</a>
                                            <span style="border: 1px solid #fff; margin: 6px 0px;"></span>
                                            <button onclick="killToken()"
                                                style="margin: 0 10px;background: none;font-weight: 500;">Logout</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- END MENU DESIGN AREA -->
                    </div>
                </div>
            </div>
        </div>
        <!-- Start banner -->
        <div class="inner-page-header">
            <img src="assets/images/bg/my_accountbg.jpg" alt="Inner Page Header" class="full-width">
            <div class="title-breadcrumb">
                <div class="container">
                    <div class="page-sub-title">
                        <h4>My Account</h4>
                    </div>
                    <div class="site-page-header clear-fix">
                        <div class="site-title">
                            <h2>My Account</h2>
                        </div>
                    </div>
                    <div class="site-page-breadcrumb">
                        <span>
                            Home > My ACcount
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <!-- End banner -->
    </header>
    <!-- / END HOMEPAGE DESIGN AREA -->
    <!-- START CONTACT DESIGN AREA -->
    <section id="myaccount" class="contact-area section-padding">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 contact-sec">
                    <!--<div class="row contact-form-design-area">-->
                    <div class="col-md-12">
                        <div class="section-title">
                            <h2>Dashboard</h2>
                            <div class="title-separator-outer ">
                                <div class="title-separator bg-primary style-liner"></div>
                            </div>
                        </div>
                        <!-- START DASHBOARD AREA -->
                        <div class="myaccount">
                            <nav>
                                <div style="font-weight: 500;" class="nav nav-tabs myaccount-nav" id="nav-tab"
                                    role="tablist">
                                    <a class="nav-item nav-link active" id="nav-profile-tab" data-toggle="tab"
                                        href="#nav-profile" role="tab" aria-controls="nav-profile"
                                        aria-selected="true"><i class="fa fa-user"></i>Profile</a>
                                    <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab"
                                        href="#nav-booking" role="tab" aria-controls="nav-booking"
                                        aria-selected="false"><i class="fa fa-briefcase"></i>booking</a>
                                    <a class="nav-item nav-link" id="nav-cards-tab" data-toggle="tab" href="#nav-cards"
                                        role="tab" aria-controls="nav-cards" aria-selected="false"><i
                                            class="fa fa-credit-card"></i>cards</a>
                                </div>
                            </nav>
                            <div class="tab-content" id="nav-tabContent">

                                <div class="tab-pane fade active in " id="nav-profile" role="tabpanel"
                                    aria-labelledby="nav-profile-tab">

                                </div>
                                <div class="tab-pane fade" id="nav-booking" role="tabpanel"
                                    aria-labelledby="nav-booking-tab">

                                </div>
                                <div class="tab-pane fade" id="nav-cards" role="tabpanel"
                                    aria-labelledby="nav-cards-tab">
                                    <h3 class="wishlist">Credit / Debit Cards</h3>
                                    <div class="ccards">
                                        <div class="settings">
                                            <h3>settings</h3>
                                            <p class="notifications">
                                                Notifications
                                            </p>
                                            <p>change the way you receive the notifications</p>
                                            <p>
                                                <input type="checkbox" name=""> Make my profile private</p>
                                            <p>
                                                <input type="checkbox" name=""> Send me an email when some one replires
                                                to one of your comment</p>
                                            <h5>Who can Contact Me?</h5>
                                            <select class="form-control">
                                                <option value="everyone">Every One</option>
                                                <option value="admin">admin</option>
                                            </select>
                                            <h5>payments</h5>
                                            <p>
                                                <input type="checkbox" name=""> auto payment</p>
                                        </div>
                                        <div class="credit-cart-setting col-no-padd">
                                            <form class="col-no-padd">
                                                <div class="col-md-4">
                                                    <h5>card type</h5>
                                                    <select class="form-control">
                                                        <option value="visa">
                                                            Visa
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="col-md-8">
                                                    <h5>card number</h5>
                                                    <input type="text" name="" class="form-control">
                                                </div>
                                                <div class="col-md-12">
                                                    <h5>expiry date</h5>
                                                    <input type="date" name="" class="form-control">
                                                </div>
                                                <h5>cvv</h5>
                                                <input type="text" class="form-control"></input>
                                                <input type="submit" name="" class="form-control" value="save details">
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- / END DASHBOARD AREA </div> -->
            </div>
        </div>
        </div>
        </div>
    </section>
    <!-- / END CONTACT DESIGN AREA -->
    <div class="modal fade" id="exampleModalCenter-Update" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Update User</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form class="user">
                        <div class="form-group">
                            <div class="row">
                                <div class="col-lg-6">
                                    <label for="fullName-update">Full Name:</label>
                                    <input type="text" class="form-control" id="fullName-update"
                                        placeholder="Enter Full Name" required>
                                </div>
                                <div class="col-lg-6">
                                    <label for="displayName">Display Name:</label>
                                    <input type="text" class="form-control" id="displayName-update"
                                        placeholder="Enter Display Name" required>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="address-update">Address:</label>
                            <input type="text" class="form-control" id="address-update" placeholder="Enter Address"
                                required>
                        </div>
                        <div class="form-group">
                            <div class="row">
                                <div class="col-lg-6">
                                    <label for="phone-update">Phone:</label>
                                    <input type="text" class="form-control" id="phone-update"
                                        placeholder="Enter Phone Number" required>
                                </div>
                                <div class="col-lg-6">
                                    <label for="dateOfBirth-update">Date Of Birth:</label>
                                    <input type="date" class="form-control" id="dateOfBirth-update"
                                        placeholder="Enter BirthDay" required>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="row">
                                <div class="col-lg-6">
                                    <label for="country-update">Country:</label>
                                    <input type="text" class="form-control" id="country-update"
                                        placeholder="Enter Country" required>
                                </div>
                                <div class="col-lg-6">
                                    <label for="description-update">Description:</label>
                                    <input type="text" class="form-control" id="description-update"
                                        placeholder="Enter Description" required>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="updateUserInfo()">Update</button>
                </div>
            </div>
        </div>
    </div>
    <!-- START COMPANY DESIGN AREA -->
    <div class="company-logo-area  wow fadeInU">
        <div class="container">
            <div id="owl-brands" class="company-logo-list owl-carousel unicase-owl-carousel owl-outer-nav">
                <div class="item">
                    <div class="item_inner">
                        <img alt="image" src="assets/images/company-logo/company_1.png">
                    </div>

                </div>

                <!-- /.item -->
                <div class="item">
                    <div class="item_inner">
                        <img alt="image" src="assets/images/company-logo/company_2.png">
                    </div>
                </div>
                <!-- /.item -->
                <div class="item">
                    <div class="item_inner">
                        <img alt="image" src="assets/images/company-logo/company_3.png">
                    </div>
                </div>
                <!-- /.item -->
                <div class="item">
                    <div class="item_inner">
                        <img alt="image" src="assets/images/company-logo/company_4.png">
                    </div>
                </div>
                <!-- /.item -->
                <div class="item">
                    <div class="item_inner">
                        <img alt="image" src="assets/images/company-logo/company_5.png">
                    </div>
                </div>
            </div>
            <div class="owl-controls clickable">
                <div class="owl-buttons">
                    <div class="owl-prev"></div>
                    <div class="owl-next"></div>
                </div>
                <!-- /.owl-carousel -->
            </div>
        </div>
    </div> <!-- / END COMPANY DESIGN AREA -->
    <!-- START FOOTER DESIGN AREA -->
    <footer>
        <div class="footer-bottom">
            <div class="container">
                <div class="row">
                    <div class="col-md-5">
                        <div class="footer-text left-align" style="text-align: left;color: white;">
                            <h4>Copyright &copy; TravelCo 2018. all rights Reserved</h4>
                        </div>
                    </div>
                    <div style="text-align: right;color: white;">
                        <i class="fa fa-map-marker" aria-hidden="true"></i> 14 Tottenham Court Road, NewYork<br />
                        <i class="fa fa-phone" aria-hidden="true"></i> 1(784)-775-95-377,
                        1(784)-678-26-567N<br />

                        <i class="fa fa-envelope-o" aria-hidden="true"></i>
                        <a href="#">info@yoursite.com/
                        </a><a href="">www.TravelCo.com</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- / END CONTACT DETAILS DESIGN AREA -->
    <!-- START SCROOL UP DESIGN AREA -->
    <div class="scroll-to-up">
        <div class="scrollup">
            <span class="fa fa-chevron-up"></span>
        </div>
    </div>
    <!-- / END SCROOL UP DESIGN AREA -->
    <!-- LATEST JQUERY -->
    <script src="assets/js/jquery.min.js"></script>
    <!-- BOOTSTRAP JS -->
    <script src="assets/js/bootstrap.min.js"></script>
    <!-- OWL CAROUSEL JS  -->
    <script src="assets/owlcarousel/js/owl.carousel.mini.js"></script>
    <!-- MAGNIFICANT JS -->
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <!-- STEALLER JS -->
    <script src="assets/js/jquery.stellar.min.js"></script>
    <!-- MAGNIFICANT JS -->
    <script src="assets/js/isotope.min.js"></script>
    <!--Image Loded JS-->
    <script src="assets/js/images-loded.min.js"></script>
    <!-- WOW JS -->
    <script src="assets/js/wow.min.js"></script>
    <!-- CONTCAT FORM JS -->
    <script src="assets/js/form-contact.js"></script>
    <script src="assets/js/venobox.min.js"></script>
    <script src="assets/js/color-switcher.js"></script>
    <!-- scripts js -->
    <script src="assets/js/scripts.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function () {
            $('[data-toggle="tab"],[data-toggle="pill"]').click(function () {
                $(this).parent().children('.active[data-toggle="tab"],.active[data-toggle="pill"]').removeClass('active');
                $(this).addClass('active');
            });
        });
    </script>
    <!-- Script by me -->
    <script>
        $(document).ready(function () {
            const dataLogin = JSON.parse(localStorage.getItem("dataLoginClient"));
            const apiUrlUser = `http://api.nibles-tour.ga/user/${dataLogin.userId}`;
            $.ajax(apiUrlUser, {
                type: "GET",
                contentType: "application/json",
                dataType: "json",
                headers: {
                    Authorization: 'Bearer ' + dataLogin.token
                }, success: function (result) {
                    const data = result.data;
                    let description = '';
                    if (data.description !== '') {
                        description = data.description;
                    } else {
                        description = 'Notthing!'
                    }
                    let str = `
                    <div class="profile-details">
                            <div class="head-profile">
                                <h3>My Profile</h3>
                            </div>
                            <div class="content-profile">
                                <div class="row">
                                    <div class="col-md-3">
                                        <img src="assets/images/profile.jpg">
                                    </div>
                                    <div class="col-md-9">
                                        <div class="info">
                                            <div class="col-md-1">
                                                <i class="fa fa-user"></i>
                                            </div>
                                            <div class="col-md-5">
                                                <p class="title">
                                                    Full Name:
                                                </p>
                                            </div>
                                            <div class="col-md-6">
                                                ${data.fullName}
                                            </div>
                                        </div>
                                        <div class="info">
                                            <div class="col-md-1">
                                                <i class="fa fa-user-secret"></i>
                                            </div>
                                            <div class="col-md-5">
                                                <p class="title">
                                                    Display Name:
                                                </p>
                                            </div>
                                            <div class="col-md-6">
                                                ${data.displayName}
                                            </div>
                                        </div>
                                        <div class="info">
                                            <div class="col-md-1">
                                                <i class="fa fa-calendar-check-o"></i>
                                            </div>
                                            <div class="col-md-5">
                                                <p class="title">
                                                    Date of Birth:
                                                </p>
                                            </div>
                                            <div class="col-md-6">
                                                ${new Date(Date.parse(data.dateOfBirth)).getDate()}/${new Date(Date.parse(data.dateOfBirth)).getMonth() + 1}/${new Date(Date.parse(data.dateOfBirth)).getFullYear()}
                                            </div>
                                        </div>
                                        <div class="info">
                                            <div class="col-md-1">
                                                <i class="fa fa-envelope"></i>
                                            </div>
                                            <div class="col-md-5">
                                                <p class="title">
                                                    Email:
                                                </p>
                                            </div>
                                            <div class="col-md-6">
                                                ${data.email}
                                            </div>
                                        </div>
                                        <div class="info">
                                            <div class="col-md-1">
                                                <i class="fa fa-phone"></i>
                                            </div>
                                            <div class="col-md-5">
                                                <p class="title">
                                                    Phone:
                                                </p>
                                            </div>
                                            <div class="col-md-6">
                                                ${data.phone}
                                            </div>
                                        </div>
                                        <div class="info">
                                            <div class="col-md-1">
                                                <i class="fa fa-map-marker"></i>
                                            </div>
                                            <div class="col-md-5">
                                                <p class="title">
                                                    Address:
                                                </p>
                                            </div>
                                            <div class="col-md-6">
                                                ${data.address}
                                            </div>
                                        </div>
                                        <div class="info">
                                            <div class="col-md-1">
                                                <i class="fa fa-globe"></i>
                                            </div>
                                            <div class="col-md-5">
                                                <p class="title">
                                                    Country
                                                </p>
                                            </div>
                                            <div class="col-md-6">
                                                ${data.country}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12 text-right">
                                        <button class="userprofile" onclick="getData()" data-toggle="modal" data-target="#exampleModalCenter-Update">Edit Profile</button>
                                    </div>
                                </div>
                            </div>
                            <div class="detail-profile">
                                <h3>About Me</h3>
                                <p>
                                    ${description}
                                </p>
                            </div>
                        </div>
                    `;
                    $("#nav-profile").html(str);

                    let listTour;

                    const apiUrlTour = `http://api.nibles-tour.ga/tour/s`;
                    $.ajax(apiUrlTour, {
                        type: "GET",
                        contentType: "application/json",
                        dataType: "json",
                        success: function (result) {
                            listTour = result.data;
                        }
                    });

                    const apiUrlBill = `http://api.nibles-tour.ga/bill/s?userid=${dataLogin.userId}`;
                    $.ajax(apiUrlBill, {
                        type: "GET",
                        contentType: "application/json",
                        dataType: "json",
                        headers: {
                            Authorization: 'Bearer ' + dataLogin.token
                        }, success: function (result) {
                            const list = result.data;
                            let booking = '';
                            if (list) {
                                for (const i of list) {
                                    let tourInfo;
                                    for (const j of listTour) {
                                        if (i.tourId === j.id) {
                                            tourInfo = j;
                                        }
                                    }
                                    let check = '';
                                    if (i.hasCancel) {
                                        check += `
                                        <h4 style="color: white;background: red;padding: 0.5em">Bill is Cancel</h4>
                                        `;
                                    } else {
                                        if (i.hasPaied) {
                                            check += `
                                            <h4 style="color: white;background: rgb(102, 200, 0);padding: 0.5em">Bill is Paied</h4>
                                            <button class="btn-danger btn-cancle bookbtn" onclick="cancleBill('${i._id}')">
                                                Cancel
                                            </button>
                                            `;
                                        } else {
                                            check += `
                                            <h4 style="color: white;background: blue;padding: 0.5em">Bill is Processing</h4>
                                            <button class="btn-success btn-apreove bookbtn" onclick="payForBill('${i._id}')">
                                                Aprove
                                            </button>
                                            <button class="btn-danger btn-cancle bookbtn" onclick="cancleBill('${i._id}')">
                                                Cancel
                                            </button>
                                            `;
                                        }
                                    }
                                    booking += `
                                <div class="clearfix"></div>
                                <div class="booking-info">
                                        <div class="col-md-2">
                                            <div class="booking-detail">
                                                <img src="http://api.nibles-tour.ga/${tourInfo.photo}">
                                            </div>
                                        </div>
                                        <div class="col-md-7">
                                            <div class="booking-detail">
                                                <h3>
                                                    ${tourInfo.tourName}
                                                </h3>
                                                <div class="detail-info">
                                                    <div class="col-md-1">
                                                        <i class="fa fa-calendar-check-o"></i>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <p>
                                                            booking date:
                                                        </p>
                                                    </div>
                                                    <div class="col-md-7">
                                                        ${new Date(Date.parse(i.createdAt)).getDate()}/${new Date(Date.parse(i.createdAt)).getMonth() + 1}/${new Date(Date.parse(i.createdAt)).getFullYear()}
                                                    </div>
                                                </div>
                                                <div class="detail-info">
                                                    <div class="col-md-1">
                                                        <i class="fa fa-sticky-note"></i>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <p>
                                                            apply date:
                                                        </p>
                                                    </div>
                                                    <div class="col-md-7">
                                                        ${new Date(Date.parse(i.applyDate)).getDate()}/${new Date(Date.parse(i.applyDate)).getMonth() + 1}/${new Date(Date.parse(i.applyDate)).getFullYear()}
                                                    </div>
                                                </div>
                                                <div class="detail-info">
                                                    <div class="col-md-1">
                                                        <i class="fa fa-user-secret"></i>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <p>
                                                            full name:
                                                        </p>
                                                    </div>
                                                    <div class="col-md-7">
                                                        ${data.fullName}
                                                    </div>
                                                </div>
                                                <div class="detail-info">
                                                    <div class="col-md-1">
                                                        <i class="fa fa-envelope"></i>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <p>
                                                            Email:
                                                        </p>
                                                    </div>
                                                    <div class="col-md-7">
                                                        ${data.email}
                                                    </div>
                                                </div>
                                                <div class="detail-info">
                                                    <div class="col-md-1">
                                                        <i class="fa fa-phone"></i>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <p>
                                                            Phone:
                                                        </p>
                                                    </div>
                                                    <div class="col-md-7">
                                                        ${data.phone}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="flex: 1 1 auto;">
                                            <div style="text-align: center; font-weight: 500;" class="col-md-3 text-center">
                                            <div style="margin: auto;" class="booking-action">
                                                ${check}
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                `;
                                }
                            } else {
                                booking += '<h3>Not Fount!</h3>'
                            }

                            let str = `
                            <div class="booking-details">
                                <div class="head-booking">
                                    <h3>Trips You have Booked!</h3>
                                </div>
                                <div class="content-booking">
                                    ${booking}
                                </div>
                            </div>
                            `;
                            $("#nav-booking").html(str);
                        }
                    });
                }
            });
        });
    </script>

    <script>
        function getData() {
            const authenticate = JSON.parse(localStorage.getItem("dataLoginClient"));
            const apiUrl = `http://api.nibles-tour.ga/user/${authenticate.userId}`;
            $.ajax({
                url: apiUrl,
                type: "GET",
                contentType: "application/json",
                headers: {
                    Authorization: 'Bearer ' + authenticate.token
                },
                dataType: "json",
                success: function async(data) {
                    const info = data.data;
                    $("#fullName-update").val(info.fullName);
                    $("#displayName-update").val(info.displayName);
                    $("#dateOfBirth-update").val((info.dateOfBirth).toString().split("T")[0]);
                    $("#address-update").val(info.address);
                    $("#email-update").val(info.email);
                    $("#phone-update").val(info.phone);
                    $("#country-update").val(info.country);
                    $("#description-update").val(info.description);
                },
                error: function (error) {
                    alert(error.responseJSON.message);
                }
            })
        }

        function updateUserInfo() {
            const authenticate = JSON.parse(localStorage.getItem("dataLoginClient"));
            const apiUrl = `http://api.nibles-tour.ga/user/${authenticate.userId}`;
            const userInfo = {
                fullName: $("#fullName-update").val(),
                address: $("#address-update").val(),
                phone: $("#phone-update").val(),
                dateOfBirth: $("#dateOfBirth-update").val(),
                country: $("#country-update").val(),
                displayName: $("#displayName-update").val(),
                description: $("#description-update").val(),
                roleId: authenticate.roleId,
                paymentMethod: ["Momo"]
            };
            $.ajax(apiUrl, {
                type: "PUT",
                data: JSON.stringify(userInfo),
                contentType: "application/json",
                dataType: "json",
                headers: {
                    Authorization: 'Bearer ' + authenticate.token
                },
                success: function async(data) {
                    alert(data.message);
                    localStorage.removeItem("userId");
                    location.reload();
                },
                error: function (error) {
                    localStorage.removeItem("userId");
                    alert(error.responseJSON.message);
                }
            });
        }
    </script>

    <script>
        function payForBill(_id) {
            const dataLogin = JSON.parse(localStorage.getItem("dataLoginClient"));
            const apiUrl = `http://api.nibles-tour.ga/bill/${_id}`;
            $.ajax(apiUrl, {
                type: "PUT",
                data: JSON.stringify({ hasPaied: true }),
                contentType: "application/json",
                dataType: "json",
                headers: {
                    Authorization: 'Bearer ' + dataLogin.token
                },
                success: function async(data) {
                    alert(data.message);
                    location.reload();
                },
                error: function (error) {
                    alert(error.responseJSON.message);
                    location.reload();
                }
            });
        }
        function cancleBill(_id) {
            const dataLogin = JSON.parse(localStorage.getItem("dataLoginClient"));
            const apiUrl = `http://api.nibles-tour.ga/bill/${_id}`;
            $.ajax(apiUrl, {
                type: "PUT",
                data: JSON.stringify({ hasCancel: true }),
                contentType: "application/json",
                dataType: "json",
                headers: {
                    Authorization: 'Bearer ' + dataLogin.token
                },
                success: function async(data) {
                    alert(data.message);
                    location.reload();
                },
                error: function (error) {
                    alert(error.responseJSON.message);
                    location.reload();
                }
            });
        }
    </script>
    <script>
        function killToken() {
            localStorage.removeItem("dataLoginClient");
            localStorage.removeItem("booking");
            document.location.pathname = '/';
        };
    </script>
</body>


<!-- Mirrored from shmai.com/preview/travelco/myaccount.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 26 Sep 2018 04:20:46 GMT -->

</html>